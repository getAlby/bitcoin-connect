"use strict";(self.webpackChunkbitcoin_connect_docs=self.webpackChunkbitcoin_connect_docs||[]).push([[303],{4323:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>c,metadata:()=>d,toc:()=>s});var o=t(4848),i=t(8453);const c={sidebar_position:2},r="\ud83d\udccb Migration Guide",d={id:"migration-guide",title:"\ud83d\udccb Migration Guide",description:"V2 to V3 migration guide",source:"@site/docs/migration-guide.md",sourceDirName:".",slug:"/migration-guide",permalink:"/bitcoin-connect-docs/migration-guide",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udc4b Introduction",permalink:"/bitcoin-connect-docs/"},next:{title:"\ud83d\ude80 Quick Start",permalink:"/bitcoin-connect-docs/quick-start"}},l={},s=[{value:"V2 to V3 migration guide",id:"v2-to-v3-migration-guide",level:2},{value:"WebLN global object",id:"webln-global-object",level:3},{value:"Init",id:"init",level:3},{value:"<code>launchModal</code> for payments",id:"launchmodal-for-payments",level:3},{value:"Modal",id:"modal",level:3},{value:"Button",id:"button",level:3},{value:"Events",id:"events",level:3},{value:"Browser / Pure HTML build",id:"browser--pure-html-build",level:3}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"-migration-guide",children:"\ud83d\udccb Migration Guide"}),"\n",(0,o.jsx)(n.h2,{id:"v2-to-v3-migration-guide",children:"V2 to V3 migration guide"}),"\n",(0,o.jsx)(n.h3,{id:"webln-global-object",children:"WebLN global object"}),"\n",(0,o.jsx)(n.p,{children:"window.webln is no longer set by default. If you rely on WebLN being available in the global window object please add the following lines to a place in your application which will be called on every page:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import {onConnected} from '@getalby/bitcoin-connect';\n\nonConnected((provider) => {\n  window.webln = provider;\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"init",children:"Init"}),"\n",(0,o.jsxs)(n.p,{children:["Attributes (such as ",(0,o.jsx)(n.code,{children:"filters"})," and ",(0,o.jsx)(n.code,{children:"appName"})," that were originally passed to individual components) have been moved to the new ",(0,o.jsx)(n.code,{children:"init"})," function exposed by the Bitcoin Connect api."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import {init} from '@getalby/bitcoin-connect-react';\n\ninit({\n  appName: 'My Lightning App', // your app name\n  // filters: [\"nwc\"],\n  // ...etc\n});\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"launchmodal-for-payments",children:[(0,o.jsx)(n.code,{children:"launchModal"})," for payments"]}),"\n",(0,o.jsxs)(n.p,{children:["This has been moved to ",(0,o.jsx)(n.code,{children:"launchPaymentModal"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"modal",children:"Modal"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"<bc-modal>"})," (or ",(0,o.jsx)(n.code,{children:"<Modal/>"}),") no longer needs to be rendered manually. Make sure to remove it so that the modal does not unexpectedly render on the page."]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"Make sure to set Bitcoin Connect css variables at the root (e.g. html/body selector) to ensure the modal uses the correct colors."}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"button",children:"Button"}),"\n",(0,o.jsxs)(n.p,{children:["Attributes have been moved from the button to the ",(0,o.jsx)(n.code,{children:"init"})," function exposed by the API."]}),"\n",(0,o.jsx)(n.h3,{id:"events",children:"Events"}),"\n",(0,o.jsxs)(n.p,{children:["New subscription methods are exposed on the Bitcoin Connect API (",(0,o.jsx)(n.code,{children:"onConnected"})," etc) replacing window events such as ",(0,o.jsx)(n.code,{children:"bc:connected"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"browser--pure-html-build",children:"Browser / Pure HTML build"}),"\n",(0,o.jsxs)(n.p,{children:["Use ",(0,o.jsx)(n.code,{children:'<script type="module">'})," as per the instructions in the README."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>d});var o=t(6540);const i={},c=o.createContext(i);function r(e){const n=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);